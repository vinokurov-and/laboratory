# Лабораторная работа №2

## Цель работы:
Разработка функционала для добавления вопросов и ответов в телеграм-бот на базе telegraf.js.

## Исходные данные:
- Выполненная 1 лабораторная работа, в рамках которой был создан пустой проект телеграм-бота на базе telegraf.js.

## Основные этапы выполнения работы:

1. **Подготовка к работе:**
   - Проверьте, что ваша среда разработки настроена корректно и все необходимые библиотеки установлены.
   - Откройте проект телеграм-бота, созданный в ходе выполнения предыдущей лабораторной работы.

### А. Создание структуры данных
Прежде всего, создайте структуру данных для хранения вопросов и ответов. Пример структуры данных:

```javascript
let questions = [];
```

### Б. Реализация команды `/addquestion`
1. Добавьте обработчик для команды `/addquestion` в вашем боте. В этом примере используется асинхронный метод для обработки команды.

```javascript
bot.command('addquestion', async (ctx) => {
  // ваш код здесь
});
```

2. В обработчике команды, запрашивайте у пользователя вопрос, а затем последовательно четыре ответа. Используйте метод `ctx.reply` для отправки сообщений пользователю.

```javascript
bot.command('addquestion', async (ctx) => {
  ctx.reply('Введите вопрос:');
  // ваш код здесь
});
```

3. Чтобы получить ответы от пользователя, вы можете использовать обработчик `on('text')`. Пример:

```javascript
let currentQuestion = null;

bot.command('addquestion', async (ctx) => {
  ctx.reply('Введите вопрос:');
});

bot.on('text', (ctx) => {
  if (currentQuestion === null) {
    currentQuestion = { question: ctx.message.text, answers: [] };
    ctx.reply('Введите первый ответ:');
  } else if (currentQuestion.answers.length < 4) {
    currentQuestion.answers.push(ctx.message.text);
    if (currentQuestion.answers.length === 4) {
      questions.push(currentQuestion);
      ctx.reply('Вопрос и ответы сохранены.');
      currentQuestion = null;
    } else {
      ctx.reply(`Введите ${currentQuestion.answers.length + 1}-й ответ:`);
    }
  }
});
```

## 4. Реализация команды просмотра вопросов:

### А. Реализация команды `/viewquestions`
1. Добавьте обработчик для команды `/viewquestions` в вашем боте.

```javascript
bot.command('viewquestions', (ctx) => {
  // ваш код здесь
});
```

2. В обработчике команды, отформатируйте и отправьте пользователю список вопросов и ответов.

```javascript
bot.command('viewquestions', (ctx) => {
  if (questions.length === 0) {
    ctx.reply('Нет добавленных вопросов.');
  } else {
    let response = '';
    questions.forEach((q, index) => {
      response += `Вопрос ${index + 1}: ${q.question}\nОтветы:\n`;
      q.answers.forEach((answer, index) => {
        response += `${index + 1}. ${answer}\n`;
      });
    });
    ctx.reply(response);
  }
});
```

## 4. Задания для самостоятельной работы
- Реализуйте команду /deletequestion, которая позволяет пользователю удалить вопрос по его индексу.
- После ввода команды /deletequestion, бот должен предложить пользователю ввести индекс вопроса, который хочет удалить.
- Если введенный индекс корректен и вопрос с таким индексом существует, удалите вопрос и отправьте пользователю подтверждение об успешном удалении.
- Если вопрос с указанным индексом отсутствует, отправьте пользователю сообщение об ошибке.

## 5. **Тестирование:**
   - Проведите тестирование функционала добавления и просмотра вопросов и ответов в различных сценариях: при пустом списке вопросов, при наличии одного и нескольких вопросов.
   - Убедитесь, что бот корректно обрабатывает все введенные данные и возвращает ожидаемые результаты.

## 6. **Создание отчета:**
   - Оформите отчет о проделанной работе, включая в него описание реализованного функционала, примеры работы бота, а также возникшие проблемы и способы их решения.

## Рекомендации:
- При тестировании уделите внимание обработке ошибок и проверке корректности введенных пользователем данных.
- Для улучшения пользовательского опыта рассмотрите возможность добавления интерактивных элементов, таких как кнопки и инлайн-клавиатуры, для управления ботом.

## Проверка работы:
Работа считается выполненной, если:
- Реализован функционал добавления вопросов и ответов в соответствии с заданием.
- Функционал протестирован и работает без ошибок.
- Код документирован и отчет оформлен в соответствии с требованиями.
